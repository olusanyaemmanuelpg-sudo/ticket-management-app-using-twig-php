# TicketFlow - Twig/PHP Implementation

A complete ticket management web application built with Twig templating engine and PHP, featuring authentication, dashboard analytics, and full CRUD operations.


---

Live link: [ https://ticket-management-app-using-twig-php.onrender.com ]
Testing authentication: [(*live link url*)/?page=(*dashboard*)] *it will redirect to login page*

---

*Test Credentials:*
- Email: admin@ticket.com
- Password: password123
---

## 🚀 Quick Start

### Prerequisites
- PHP 7.4 or higher
- Composer (PHP package manager)
- A local PHP server (XAMPP, MAMP, or built-in PHP server)

### Step 1: Install Dependencies

bash
# Install Composer (if not already installed)
# Visit: https://getcomposer.org/download/

# Navigate to project folder
cd ticketflow-twig

# Install Twig via Composer
composer install


### Step 2: Start PHP Server

bash
# Using built-in PHP server
php -S localhost:8000

# OR using XAMPP/MAMP
# Place folder in htdocs/ or www/ folder
# Access via http://localhost/ticketflow-twig


### Step 3: Open in Browser


http://localhost:8000


---

## 📁 Project Structure


ticketflow-twig/
├── templates/
│   ├── pages/
│   │   ├── landing.twig
│   │   ├── login.twig
│   │   ├── signup.twig
│   │   ├── dashboard.twig
│   │   └── tickets.twig
│   └── layout.twig
├── vendor/              (Generated by Composer)
├── index.php            (Main entry point)
├── composer.json        (PHP dependencies)
├── composer.lock        (Lock file)
└── README.md


---

## ✅ Features

### Landing Page
- Hero section with wavy SVG background
- Two decorative gradient circles
- Three feature cards
- Responsive design
- Max-width 1440px centered layout

### Authentication
- Login page with session-based auth
- Signup page with validation
- Session management using PHP $_SESSION
- Protected routes (Dashboard & Tickets)
- Toast notifications for feedback

### Dashboard
- Summary statistics (Total, Open, In Progress, Closed)
- Color-coded stat cards
- Navigate to Ticket Management
- Logout functionality

### Ticket Management (CRUD)
- *Create* new tickets
- *Read/View* all tickets in cards
- *Update* existing tickets
- *Delete* tickets with confirmation
- Status badges with color coding
- Form validation
- Session-based data persistence

---

## 🔐 Test Credentials

*Login:*
- Email: admin@ticket.com
- Password: password123

*Or signup* with any credentials.

---

## 🎨 How Twig Works

### Template Inheritance
twig
{# layout.twig - Base template #}
<!DOCTYPE html>
<html>
<head>...</head>
<body>
    {% include 'pages/' ~ page ~ '.twig' %}
</body>
</html>


### Variables
twig
{{ user.name }}           {# Output variable #}
{{ ticket.title }}
{{ stats.total }}


### Control Structures
twig
{% if user %}             {# Conditional #}
    Welcome, {{ user.name }}!
{% endif %}

{% for ticket in tickets %} {# Loop #}
    <div>{{ ticket.title }}</div>
{% endfor %}


### Filters
twig
{{ ticket.status|replace({'_': ' '}) }}  {# Replace underscore #}


---

## 🔄 Data Flow

### Authentication Flow
1. User submits login form (POST to index.php)
2. PHP validates credentials
3. If valid: Save to $_SESSION['ticketapp_session']
4. Redirect to dashboard with toast message
5. If invalid: Redirect back with error

### Ticket CRUD Flow
1. User creates/edits ticket (POST with ticket_action)
2. PHP processes form data
3. Updates $_SESSION['tickets'] array
4. Redirects back to tickets page
5. Toast message shows success

### Session Management
- *Key*: $_SESSION['ticketapp_session']
- *Format*: ['email' => '...', 'name' => '...', 'id' => ...]
- *Tickets*: Stored in $_SESSION['tickets']
- *Toast*: Temporary in $_SESSION['toast'], cleared after display

---

## 🎯 Key PHP Concepts Used

### Session Management
php
session_start();                                    // Start session
$_SESSION['ticketapp_session'] = $userData;        // Save data
$user = $_SESSION['ticketapp_session'] ?? null;    // Retrieve data
unset($_SESSION['ticketapp_session']);             // Delete data
session_destroy();                                  // Clear all


### Form Handling
php
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $email = $_POST['email'] ?? '';
    $password = $_POST['password'] ?? '';
    // Process form...
}


### Redirects
php
header('Location: index.php?page=dashboard');
exit;


### Array Filtering (for statistics)
php
$openTickets = array_filter($tickets, fn($t) => $t['status'] === 'open');
$openCount = count($openTickets);


---

## 🛠 Extending the Application

### Add New Page

1. *Create template:*
bash
touch templates/pages/newpage.twig


2. *Update index.php:*
php
// In routing section
elseif ($page === 'newpage') {
    // Handle logic
}


3. *Add to layout.twig:*
twig
{% elseif page == 'newpage' %}
    {% include 'pages/newpage.twig' %}
{% endif %}


### Add Database Persistence

Instead of sessions, use MySQL:

php
// Connect to database
$pdo = new PDO('mysql:host=localhost;dbname=ticketflow', 'user', 'pass');

// Save ticket
$stmt = $pdo->prepare('INSERT INTO tickets (title, status, description) VALUES (?, ?, ?)');
$stmt->execute([$title, $status, $description]);

// Get tickets
$stmt = $pdo->query('SELECT * FROM tickets');
$tickets = $stmt->fetchAll(PDO::FETCH_ASSOC);


---

## 🐛 Common Issues

### Issue: "Class 'Twig\Loader\FilesystemLoader' not found"
*Fix:* Run composer install

### Issue: "Session already started"
*Fix:* Remove duplicate session_start() calls

### Issue: Templates not found
*Fix:* Check that templates/ folder exists and paths are correct

### Issue: Cannot modify header information
*Fix:* Ensure no output before header() calls (no echo, no HTML)

---

## 🚀 Deployment

### Deploy to Shared Hosting (cPanel)

1. *Upload files* via FTP to public_html/
2. *Run composer* in SSH:
   bash
   cd public_html
   composer install
   
3. *Set permissions:*
   bash
   chmod 755 index.php
   
4. *Access:* http://yourdomain.com

### Deploy to Heroku

1. **Create Procfile:**
   
   web: vendor/bin/heroku-php-apache2
   

2. *Deploy:*
   bash
   git init
   git add .
   git commit -m "Initial commit"
   heroku create
   git push heroku main
   

---

## 📊 Comparison: Twig vs React/Vue

| Feature | Twig | React/Vue |
|---------|------|-----------|
| *Rendering* | Server-side | Client-side |
| *Data Flow* | Request/Response | State management |
| *Routing* | PHP (GET params) | JS Router |
| *State* | Session/Database | useState/ref |
| *SEO* | Excellent | Requires SSR |
| *Speed* | Fast initial load | Fast after load |
| *Complexity* | Simpler | More complex |

---

## 🎨 Design Specifications

All styling is identical to React/Vue versions:
- Max-width: 1440px
- Wavy SVG hero background
- 2 decorative circles
- Status colors: Green (open), Amber (in_progress), Gray (closed)
- Fully responsive

---

## ✅ Validation Rules

### Login
- Email required
- Password required

### Signup
- Name required
- Email required
- Password required (min 6 characters)

### Tickets
- Title required
- Status must be: open, in_progress, or closed
- Description optional

---

## 🔒 Security Notes

*Current Implementation (Development):*
- Mock authentication (no real password hashing)
- Session-based storage (not production-ready)
- No CSRF protection


---

## 📝 License

MIT License


